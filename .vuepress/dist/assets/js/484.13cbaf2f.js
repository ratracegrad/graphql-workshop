(window.webpackJsonp=window.webpackJsonp||[]).push([[484],{650:function(e,t,a){"use strict";a.r(t);var s=a(0),o=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"mongoose-model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongoose-model","aria-hidden":"true"}},[e._v("#")]),e._v(" Mongoose Model")]),e._v(" "),a("p",[e._v("Now that we have connected to our database, we need to create a schema to define the data in the database. For mongoose a schema is called a model. We need to create our models before we put data into the database. We need a model for books and one for authors.")]),e._v(" "),a("p",[e._v("In your server folder create a new folder called "),a("strong",[e._v("models")]),e._v(". Inside that folder create these two files:")]),e._v(" "),a("ul",[a("li",[e._v("author.js")]),e._v(" "),a("li",[e._v("book.js")])]),e._v(" "),a("h2",{attrs:{id:"create-book-schema"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-book-schema","aria-hidden":"true"}},[e._v("#")]),e._v(" Create Book Schema")]),e._v(" "),a("p",[e._v("Open up the book.js file that you just created. In this file we need to create our mongoose schema. We first need to require the mongoose package that we installed. Then we create a Schema.  Next we define the bookSchema.  The bookSchema will have fields for:")]),e._v(" "),a("ul",[a("li",[e._v("name")]),e._v(" "),a("li",[e._v("genre")]),e._v(" "),a("li",[e._v("authorId")])]),e._v(" "),a("p",[e._v("The last thing you need to do is export the model so we can use it elsewhere.")]),e._v(" "),a("p",[e._v("Here is what the file should look like:")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" mongoose "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'mongoose'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" Schema "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("Schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" bookSchema "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    genre"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    authorId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" String\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("model")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Book'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" bookSchema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("h2",{attrs:{id:"create-author-schema"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-author-schema","aria-hidden":"true"}},[e._v("#")]),e._v(" Create Author Schema")]),e._v(" "),a("p",[e._v('The Author schema will be very similar to the book schema we just created. Copy the book schema and paste it into the author.js file. Change all occurances of the string "bookSchema" to "authorSchema". Change the name of the model from "Book" to "Author".  The author schema will only have two fields:')]),e._v(" "),a("ul",[a("li",[e._v("name")]),e._v(" "),a("li",[e._v("age")])]),e._v(" "),a("p",[e._v("Remember that age is a Number and not a String.")]),e._v(" "),a("p",[a("strong",[e._v("NOTE:")]),e._v(" We do not have to add an id for either schema because by default MongoDB will create a unique id for every document created in the database.")]),e._v(" "),a("h2",{attrs:{id:"update-resolve-functions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-resolve-functions","aria-hidden":"true"}},[e._v("#")]),e._v(" Update Resolve Functions")]),e._v(" "),a("p",[e._v("Now that we have created our two database models we will need to require them in our schema.js file. Open up the schema.js file and require both of our models. Use this command:")]),e._v(" "),a("p",[e._v("In our schema file comment out all the code that we have created in all of our resolve functions. We will be replacing it with the correct mongoose call to get data from a MongoDB database.")])])}],!1,null,null,null);t.default=o.exports}}]);