(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{300:function(t,e,a){"use strict";a.r(e);var n=a(0),i=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"aproba"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aproba","aria-hidden":"true"}},[t._v("#")]),t._v(" aproba")]),t._v(" "),a("p",[t._v("A ridiculously light-weight function argument validator")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("var validate = require(\"aproba\")\n\nfunction myfunc(a, b, c) {\n  // `a` must be a string, `b` a number, `c` a function\n  validate('SNF', arguments) // [a,b,c] is also valid\n}\n\nmyfunc('test', 23, function () {}) // ok\nmyfunc(123, 23, function () {}) // type error\nmyfunc('test', 23) // missing arg error\nmyfunc('test', 23, function () {}, true) // too many args error\n\n")])])]),a("p",[t._v("Valid types are:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("type")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("*")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("matches any type")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("A")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("Array.isArray")]),t._v(" OR an "),a("code",[t._v("arguments")]),t._v(" object")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("S")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("typeof == string")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("N")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("typeof == number")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("F")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("typeof == function")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("O")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("typeof == object and not type A and not type E")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("B")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("typeof == boolean")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("E")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("instanceof Error")]),t._v(" OR "),a("code",[t._v("null")]),t._v(" "),a("strong",[t._v("(special: see below)")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Z")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("== "),a("code",[t._v("null")])])])])]),t._v(" "),a("p",[t._v("Validation failures throw one of three exception types, distinguished by a\n"),a("code",[t._v("code")]),t._v(" property of "),a("code",[t._v("EMISSINGARG")]),t._v(", "),a("code",[t._v("EINVALIDTYPE")]),t._v(" or "),a("code",[t._v("ETOOMANYARGS")]),t._v(".")]),t._v(" "),a("p",[t._v("If you pass in an invalid type then it will throw with a code of\n"),a("code",[t._v("EUNKNOWNTYPE")]),t._v(".")]),t._v(" "),a("p",[t._v("If an "),a("strong",[t._v("error")]),t._v(" argument is found and is not null then the remaining\narguments are optional.  That is, if you say "),a("code",[t._v("ESO")]),t._v(" then that's like using a\nnon-magical "),a("code",[t._v("E")]),t._v(" in: "),a("code",[t._v("E|ESO|ZSO")]),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"but-i-have-optional-arguments"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#but-i-have-optional-arguments","aria-hidden":"true"}},[t._v("#")]),t._v(" But I have optional arguments?!")]),t._v(" "),a("p",[t._v("You can provide more than one signature by separating them with pipes "),a("code",[t._v("|")]),t._v(".\nIf any signature matches the arguments then they'll be considered valid.")]),t._v(" "),a("p",[t._v("So for example, say you wanted to write a signature for\n"),a("code",[t._v("fs.createWriteStream")]),t._v(".  The docs for it describe it thusly:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("fs.createWriteStream(path[, options])\n")])])]),a("p",[t._v("This would be a signature of "),a("code",[t._v("SO|S")]),t._v(".  That is, a string and and object, or\njust a string.")]),t._v(" "),a("p",[t._v("Now, if you read the full "),a("code",[t._v("fs")]),t._v(" docs, you'll see that actually path can ALSO\nbe a buffer.  And options can be a string, that is:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("path <String> | <Buffer>\noptions <String> | <Object>\n")])])]),a("p",[t._v("To reproduce this you have to fully enumerate all of the possible\ncombinations and that implies a signature of "),a("code",[t._v("SO|SS|OO|OS|S|O")]),t._v(".  The\nawkwardness is a feature: It reminds you of the complexity you're adding to\nyour API when you do this sort of thing.")]),t._v(" "),a("h3",{attrs:{id:"browser-support"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#browser-support","aria-hidden":"true"}},[t._v("#")]),t._v(" Browser support")]),t._v(" "),a("p",[t._v("This has no dependencies and should work in browsers, though you'll have\nnoisier stack traces.")]),t._v(" "),a("h3",{attrs:{id:"why-this-exists"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#why-this-exists","aria-hidden":"true"}},[t._v("#")]),t._v(" Why this exists")]),t._v(" "),a("p",[t._v("I wanted a very simple argument validator. It needed to do two things:")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Be more concise and easier to use than assertions")])]),t._v(" "),a("li",[a("p",[t._v("Not encourage an infinite bikeshed of DSLs")])])]),t._v(" "),a("p",[t._v("This is why types are specified by a single character and there's no such\nthing as an optional argument.")]),t._v(" "),a("p",[t._v("This is not intended to validate user data. This is specifically about\nasserting the interface of your functions.")]),t._v(" "),a("p",[t._v("If you need greater validation, I encourage you to write them by hand or\nlook elsewhere.")])])}],!1,null,null,null);e.default=i.exports}}]);